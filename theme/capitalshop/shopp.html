<!doctype html>
<html class="no-js" lang="en">


<!-- Mirrored from htmldemo.net/dorno/dorno/shop-right-sidebar.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Sep 2024 19:54:28 GMT -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="assets/img/icon/favicon.png">
    
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/slicknav.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/animate.min.css">
    <link rel="stylesheet" href="assets/css/price_rangs.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/themify-icons.css">
    <link rel="stylesheet" href="assets/css/slick.css">
    <link rel="stylesheet" href="assets/css/nice-select.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="Content/css/CleanOut.css">
   
    <link rel="stylesheet" href="DornoStyle/assets/css/style.css">

    <link rel="stylesheet" href="DornoStyle/assets/css/slick.css">
    <link rel="stylesheet" href="Content/css/shopp.css">
    <!-- مكابة لاضافة خط كايرو وخط اخر لكل التيمبلت -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- /// -->
  
    <!-- contact -->
        <!-- الروابط الصحيحة لـ Bootstrap و jQuery -->
        <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
        <!-- تأكد من استخدام النسخة الأحدث من jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/MaterialDesign-Webfont/3.6.95/css/materialdesignicons.css" rel="stylesheet">
   
    
    <!-- noUiSlider -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.css">
</head>
<style>
.label_product span.label_sale {
    top: 15px;
    left: 240px !important;
    text-transform: uppercase;
    color: #ffffff;
    background: #F53737;
    font-size: 12px;
    font-weight: 600;
    height: 24px;
    line-height: 24px;
    width: 56px;
    text-align: center;
    display: block;
    border-radius: 18px;
}

.label_product span {
    position: absolute;
    z-index: 9;
}



.label_product span.label_new {
    top: 15px;
    left: 0px !important;
    text-transform: uppercase;
    color: #ffffff;
    background: #46ce91;
    font-size: 12px;
    font-weight: 600;
    height: 24px;
    line-height: 24px;
    width: 56px;
    text-align: center;
    display: block;
    border-radius: 18px;
}
.label_product span {
    position: absolute;
    z-index: 9;
}

/*mini cart css here*/
.mini_cart_wrapper {
  position: relative;
}

.mini_cart_wrapper span.item_count {
    position: absolute !important;
    right: 0px !important;
    width: 19px !important;
    top: 24px;
    height: 19px;
    line-height: 19px;
    background: #F53737;
    border-radius: 100%;
    text-align: center;
    font-weight: 400;
    font-size: 11px;
    color: #fff;
}

.mini_cart_wrapper:hover .mini_cart {
  max-height: 500px;
  padding: 18px 28px 33px;
  visibility: visible;
}

@media only screen and (min-width: 768px) and (max-width: 991px) {
  .mini_cart_wrapper:hover .mini_cart {
    padding: 10px 11px 20px;
    visibility: inherit;
  }
}

@media only screen and (max-width: 767px) {
  .mini_cart_wrapper:hover .mini_cart {
    padding: 10px 11px 20px;
    visibility: inherit;
  }
}
.mini_cart {
  position: absolute;
  min-width: 355px;
  padding: 0 28px;
  background: #fff;
  z-index: 1000; /* زيادة قيمة z-index */
  right: 0;
  top: 142%;
  max-height: 500px;
  visibility: visible;
  overflow-y: auto;
  box-shadow: 0 3px 11px 0 rgba(0, 0, 0, 0.1);
  transition: 0.5s;
  border-radius: 4px;
}


.cart_img {
  width: 90px;
  margin-right: 10px;
  border: 1px solid transparent;
}

.cart_img:hover {
  border-color: #F53737;
}

.cart_info {
  width: 63%;
}

.cart_info a {
  font-weight: 400;
  font-size: 14px;
  line-height: 20px;
  display: block;
  margin-bottom: 6px;
}

.cart_info a:hover {
  color: #F53737;
}

.cart_info p {
  font-size: 12px;
}

.cart_info p span {
  font-weight: 600;
}

.cart_remove a {
  font-size: 20px;
  display: block;
  line-height: 20px;
  text-align: center;
  border-radius: 50%;
}

.cart_remove a:hover {
  color: #F53737;
}

.cart_item {
  overflow: hidden;
  padding: 11px 0;
  border-bottom: 1px solid #e5e5e5;
  display: flex;
  justify-content: space-between;
}

.cart_button a {
  text-transform: uppercase;
  border-radius: 3px;
  font-size: 12px;
  font-weight: 500;
  background: #eef0f1;
  display: block;
  text-align: center;
  line-height: 20px;
  margin-bottom: 0;
  padding: 13px 0px 11px;
  border: 1px solid #e5e5e5;
}

.cart_button a:hover {
  background: #F53737;
  border-color: #F53737;
  color: #fff;
}
.mini_cart {
    z-index: 1200 !important; /* زيادة z-index للتأكد من ظهوره فوق العناصر الأخرى */
}

.sidebar_widget1 {
    z-index: 1000 !important; /* تعيين z-index أقل لضمان ظهور الـ mini cart فوقه */
}
.mini_cart_wrapper {
    position: relative;
}

.mini_cart_wrapper span.item_count {
    position: absolute;
    right: 0px;
    width: 19px;
    top: 24px;
    height: 19px;
    line-height: 19px;
    background: #F53737;
    border-radius: 100%;
    text-align: center;
    font-weight: 400;
    font-size: 11px;
    color: #fff;
}

.mini_cart_wrapper:hover .mini_cart {
    max-height: 500px;
    padding: 18px 28px 33px;
    visibility: visible;
}

.mini_cart {
    position: absolute;
    min-width: 355px;
    padding: 0 28px;
    background: #fff;
    z-index: 1200;
    right: 0;
    top: 142%;
    max-height: 500px;
    visibility: hidden; /* يبدأ مخفي */
    overflow-y: auto;
    box-shadow: 0 3px 11px 0 rgba(0, 0, 0, 0.1);
    transition: 0.5s;
    border-radius: 4px;
}

.mini_cart_wrapper:hover .mini_cart {
    visibility: visible; /* يظهر عند التمرير */
}
/*mini cart css end*/
/* تكبير المساحة */
.container-fluid {
    max-width: 100%; /* تأكد من أن الحاوية تستخدم العرض الكامل */
    padding: 0 15px; /* إضافة هوامش جانبية لتجنب التصاق المحتوى بالحواف */
}

/* تخصيص المساحة بين الكاردات */
.product__filter .col-lg-3 {
    margin-bottom: 30px; /* لضمان أن الكاردات لا تتلاصق */
}

/* تخصيص الكاردات لتكون بنفس الحجم */
.product__filter .col-lg-3 {
    padding: 15px; /* إضافة حواف بين الكاردات */
    display: flex;
    justify-content: center;
    align-items: stretch; /* لتوزيع المحتوى بشكل متساوي داخل الكارد */
}

.product__filter .col-lg-3 > .card {
    width: 100%; /* ضمان أن الكارد يملأ المساحة بالكامل */
    height: 100%; /* ضمان تساوي ارتفاع الكاردات */
    display: flex;
    flex-direction: column;
    justify-content: space-between; /* توزيع المحتوى بانتظام */
    min-height: 350px; /* تحديد الحد الأدنى للارتفاع */
    flex-grow: 1; /* لملء المساحة المتاحة */
}

/* تخصيص الصورة داخل الكارد */
.card img {
    width: 100%; /* تأكد من أن الصورة لا تتعدى عرض الكارد */
    height: 200px; /* تحديد ارتفاع الصورة بشكل ثابت */
    object-fit: cover; /* الحفاظ على تناسق الصورة دون تشويه */
    object-position: center; /* وضع الصورة في المنتصف */
}

/* تخصيص محتوى النص داخل الكارد */
.card-body {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    flex-grow: 1; /* جعل المحتوى داخل الكارد يتوزع على المساحة المتاحة */
}

/* تخصيص الـ dropdown والفلاتر */
.sidebar_widget1 {
    margin-top: 30px;
}
/* //////////////////// */
/* تنسيق حاوية الفئات الفرعية */
.subcategory-grid {
    display: grid; /* استخدام grid لترتيب العناصر */
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* تحديد الأعمدة بشكل مرن */
    gap: 20px; /* المسافة بين الصناديق */
    padding: 0;
    list-style-type: none;
}

/* تنسيق الصندوق الخاص بكل فئة فرعية */
.subcategory-grid li {
    background-color: #f4f4f4; /* لون خلفية الصندوق */
    border-radius: 8px; /* منح الصندوق زوايا مدورة */
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* إضافة ظل خفيف لجعل الصناديق بارزة */
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.3s ease; /* إضافة تأثير الانتقال عند التفاعل */
    cursor: pointer;
}

/* تغيير اللون عند التمرير فوق الفئة */
.subcategory-grid li:hover {
    background-color: #dc0e0e; /* تغيير لون الخلفية عند التمرير */
    color: white; /* تغيير اللون عند التمرير */
    transform: scale(1.05); /* تكبير الصندوق بشكل خفيف */
}

/* تنسيق النص داخل الصندوق */
.subcategory-grid li a {
    text-decoration: none; /* إزالة الخط تحت الرابط */
    color: inherit; /* استخدام اللون الوراثي للصندوق */
    font-weight: bold;
    text-align: center;
    font-size: 16px; /* حجم الخط */
}

/* تأثير عند التمرير فوق الرابط */
.subcategory-grid li a:hover {
    color: #fff; /* تغيير لون النص عند التمرير */
    text-decoration: underline; /* إضافة خط تحت الرابط */
}
.container {
    min-height: 80vh; /* أو قم بتعديل القيمة لتناسب الفوتر */
}
/* تنسيق الـ dropdown للـ brand */
.widget_manu .dropdown-content {
    max-height: 300px; /* تحديد أقصى ارتفاع للـ dropdown */
    overflow-y: auto; /* تمكين التمرير داخل الـ dropdown إذا كان المحتوى أطول */
    padding: 10px;
    width: 430px;
    box-sizing: border-box;
    background-color: #f9f9f9;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* ظل خفيف */
}

/* تأثيرات عند المرور بالماوس */
.widget_manu .dropdown-content a:hover {
    background-color: #717171; /* تغيير الخلفية عند التمرير */
    color: white;
}
#applyFilter {
    float: right; /* لجعل الزر يظهر على اليمين */
    margin: 10px; /* إضافة مسافة حول الزر */
}
/* //////////////*/
/* التأكد من أن القائمة تفتح دائمًا للأسفل */
#colorFilter {
    position: relative;
    transform-origin: top center; /* تحديد نقطة الأصل في الأعلى */
}

#colorFilter:focus {
    transform: rotate(0deg); /* إعادة الفتح للأسفل */
}


</style>
<body>

 
<header>
    <div class="header-area">
        <!-- الجزء الأول (Header-Top) -->
        <div class="header-top d-none d-sm-block">
            <div class="container1" style="margin-left: 3%;margin-right: 3%;">
                <div class="row">
                    <div class="col-xl-12">
                        <div class="d-flex justify-content-between flex-wrap align-items-center">
                            <div class="header-info-left">
                                <ul>
                                    <li><a href="CleanOut.html#faq">الأسئلة الشائعة</a></li>
                                    <li><a href="About1.html">معلومات عنا</a></li>
                                </ul>
                            </div>
                            <div class="header-info-right d-flex">
                                <ul class="order-list">
                                    <li><a href="#">قائمة أمنياتي</a></li>
                                    <li><a href="#">تتبع الطلب</a></li>
                                </ul>
                                <ul class="header-social">
                                    <li><a href="#"><i class="fab fa-facebook"></i></a></li>
                                    <li><a href="#"><i class="fab fa-instagram"></i></a></li>
                                    <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                                    <li><a href="#"><i class="fab fa-linkedin-in"></i></a></li>
                                    <li><a href="#"><i class="fab fa-youtube"></i></a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    
        <!-- الجزء الثاني (Header-Bottom) -->
        <div class="header-bottom text-center">
            <p dir="rtl">تخفيضات تصل إلى 50%  أسرع ! العرض لفترة محدودة <a href="#" class="browse-btn">تسوق الآن</a></p>
        </div>
    
        <!-- الجزء الثالث (Header-Mid) -->
        <div class="header-mid header-sticky">
            <div class="container1">
                <div class="menu-wrapper" style="margin: 0px;">
                    <div class="logo" style="margin-left: 1%">
                        <a href="index.html"><img src="assets/img/logo/logo.png" alt="الشعار"></a>
                    </div>
                    <div class="main-menu d-none d-lg-block">
                        <nav>
                            <ul id="navigation">
                            
                                <li><a href="#">البيع</a>
                                    <ul class="submenu">
                                        <li style="text-align:center;"><a href="CleanOut.html">بيع معنا</a></li>
                                        <li style="text-align:center;"><a href="blog.html">المدونة</a></li>
                                        <li style="text-align:center;"><a href="blog-details.html">تفاصيل المدونة</a></li>
                                    </ul>
                                </li>
                                <li><a href="contact.html">تواصل معنا</a></li>
                                <li class="new"><a href="shopp.html">الحفلات</a></li>
                                <li><a href="shopp.html">الأطفال</a></li>
                                <li><a href="shopp.html">رجال</a></li>
                                <li><a href="shopp.html">نساء</a></li>
                                <li><a href="index.html">الرئيسية</a></li>
                            </ul>
                        </nav>
                    </div>
    



                    <div class=" main-menu d-none d-lg-block" style="margin-right: 4%">
                        <nav  >
                            <ul id="navigation">
                                <li>
                             
                                    <li class="cart mini_cart_wrapper" style="position: relative;">
                                        <a href="javascript:void(0)">
                                          <span class="flaticon-shopping-cart"></span>
                                          <span class="item_count" id="numberOfSelectedItems"></span>
                                        </a>
                                        <!-- القائمة المصغرة للمحتويات -->
                                        <div class="mini_cart" style="display: none; position: absolute; top: 100%; z-index: 1200">
                                          <div class="cart_gallery" id="cartGallery" style="display: none; position: absolute; top: 100%; z-index: 1200">
                                            <!-- المحتويات هنا -->
                                          </div>
                                          <div class="mini_cart_footer">
                                            <div class="cart_button">
                                              <a href="cart.html" style="font-size: 14px; width: 40%; height: 10px; position: relative; left: 30%; font-size: 10px; margin-top: 2%; display: inline-flex; justify-content: center; align-items: center;">
                                                <i class="fa fa-shopping-cart"></i> View cart
                                              </a>
                                            </div>
                                          </div>
                                        </div>
                                      </li>
                                      
                                <li>
                                    <a href="#" id="userIcon"> <span class="flaticon-user"></span> <i class="fas fa-angle-down"></i></a>
                                    <ul class="submenu"> <!-- قائمة المستخدم -->
                                         <li style="text-align:center;" id="userAccount"><a href="UserDashboard.html">حسابي</a></li>
                                    
                                        <li style="text-align:center;"  id="login"><a href="login.html">حسابي/تسجيل</a></li>
                                        <li style="text-align:center;"><a href="register.html">إنشاء حساب</a></li>
                                    </ul>
                                </li>
                                </ul>
                                
                                </li>
                             
                            </ul>
                        </nav>
                    </div>
    
             
    
             
    
                <div class="col-12">
                    <div class="mobile_menu d-block d-lg-none"></div>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- shop area start -->
<div class="shop_area mt-100 mb-100">
    <div class="container-fluid"> <!-- استخدام container-fluid لزيادة المساحة -->
        <div class="row">
            <!-- المنتجات -->
            <div class="col-lg-9 col-md-12">
                <div class="row product__filter" id="products-container">
                    <!-- الكاردات سيتم إضافتها هنا ديناميكيًا -->
                    <!-- مثال على كارد -->
                    <div class="col-lg-3 col-md-4 col-sm-6">
                        <!-- محتوى الكارد هنا -->
                    </div>
                    <div class="col-lg-3 col-md-4 col-sm-6">
                        <!-- محتوى الكارد هنا -->
                    </div>
                    <div class="col-lg-3 col-md-4 col-sm-6">
                        <!-- محتوى الكارد هنا -->
                    </div>
                    <div class="col-lg-3 col-md-4 col-sm-6">
                        <!-- محتوى الكارد هنا -->
                    </div>
                </div>
            </div>
            
            <!-- الفلاتر -->
            <div class="col-lg-3 col-md-12">
                <aside class="sidebar_widget1">
                    <div class="widget_inner1">
                        <div class="widget_list widget_filter">
                            <h3 class="filter-title">فلتر حسب السعر</h3>
                            <form action="#" id="PriceRange">
                                <div id="slider-range" class="slider"></div>
                                <input type="text" name="text" id="amount" class="amount-input" placeholder="النطاق السعري" readonly />
                                <br><br>
                                <button type="button" id="applyFilter" class="btn btn-primary">تطبيق الفلتر</button>

                            </form>
                        </div>
                    </div>
                </aside>

                <!-- فلترة الألوان -->
                <div class="widget_list widget_color">
                    <h3>اختر حسب اللون</h3>
                    <select id="colorFilter">
                        <option value="" disabled selected>اختر لونًا</option>
                        <!-- الألوان ستضاف هنا ديناميكيًا -->
                    </select>
                </div>

                <!-- البراند -->
                <div class="widget_list widget_manu" dir="rtl">
                    <h3>البراند</h3>
                    <div class="dropdown">
                        <button class="dropbtn">اختر البراند</button>
                        <div class="dropdown-content" id="brandFilter">
                            <!-- سيتم إضافة العلامات التجارية هنا -->
                        </div>
                    </div>
                </div>

                <!-- الفئات الفرعية -->
                <div class="filter">
                    <h3 style="text-align: right;">اختر الفئة الفرعية</h3>
                    <ul id="subcategoryFilter" class="subcategory-grid">
                        <!-- الفئات الفرعية ستظهر هنا -->
                    </ul>
                </div>
                
            </div>
        </div>
    </div>
</div>

            <footer>
                <div class="footer-wrapper gray-bg">
                    <div class="footer-area footer-padding">
            
                        <!-- قسم الاشتراك في النشرة الإخبارية -->
                        <section class="subscribe-area">
                            <div class="container">
                                <div class="row justify-content-between subscribe-padding">
                                    <div class="col-xxl-2 col-xl-2 col-lg-4">
                                        <div class="footer-social">
                                            <a href="https://bit.ly/sai4ull"><i class="fab fa-facebook"></i></a>
                                            <a href="#"><i class="fab fa-instagram"></i></a>
                                            <a href="#"><i class="fab fa-youtube"></i></a>
                                        </div>
                                    </div>
                                   
                                    <div class="col-xxl-5 col-xl-6 col-lg-7 col-md-9">
                                        <div class="subscribe-caption">
                                            <form action="#">
                                                <input type="text" placeholder="أدخل بريدك الإلكتروني">
                                                <button class="subscribe-btn">اشترك</button>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-xxl-3 col-xl-3 col-lg-4">
                                        <div class="subscribe-caption">
                                            <h3>اشترك في النشرة الإخبارية</h3>
                                            <p>اشترك في النشرة الإخبارية للحصول على خصم 5% على جميع المنتجات.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
            
                        <!-- قسم معلومات الفوتر -->
                        <div class="container">
                            <div class="row justify-content-between">
                              
                                <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                                    <div class="single-footer-caption mb-50">
                                        <div class="footer-tittle">
                                            <h4>تسوق للرجال</h4>
                                            <ul>
                                                <li><a href="#">أزياء الملابس</a></li>
                                                <li><a href="#">شتاء</a></li>
                                                <li><a href="#">صيف</a></li>
                                                <li><a href="#">رسمية</a></li>
                                                <li><a href="#">عادية</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                                    <div class="single-footer-caption mb-50">
                                        <div class="footer-tittle" >
                                            <h4>تسوق للنساء</h4>
                                            <ul>
                                                <li><a href="#">أزياء الملابس</a></li>
                                                <li><a href="#">شتاء</a></li>
                                                <li><a href="#">صيف</a></li>
                                                <li><a href="#">رسمية</a></li>
                                                <li><a href="#">عادية</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                                    <div class="single-footer-caption mb-50">
                                        <div class="footer-tittle">
                                            <h4>معلومات</h4>
                                            <ul>
                                                <li><a href="#">من نحن</a></li>
                                                <li><a href="#">سياسة الخصوصية</a></li>
                                                <li><a href="#">الشروط والأحكام</a></li>
                                                <li><a href="#">اتصل بنا</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xl-3 col-lg-3 col-md-6 col-sm-8">
                                    <div class="single-footer-caption mb-50">
                                        <div class="single-footer-caption mb-20">
                                            <div class="footer-logo mb-35">
                                                <a href="index.html"><img src="assets/img/logo/logo2_footer.png" alt="شعار"></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
            
                    </div>
                </div>
            </footer>
            
            <div id="back-top">
            <a class="wrapper" title="Go to Top" href="#">
            <div class="arrows-container">
            <div class="arrow arrow-one">
            </div>
            <div class="arrow arrow-two">
            </div>
            </div>
            </a>
            </div>

                
            <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.js"></script>

<script>

document.addEventListener("DOMContentLoaded", async function() {
    const colorFilter = document.getElementById("colorFilter");
    const productsContainer = document.getElementById("products-container");
    const categoryId =localStorage.getItem("CategoryId")

   
    try {
        const colorsResponse = await fetch('https://localhost:44332/api/Products/COLOR');
        const colors = await colorsResponse.json();
        console.log("Colors:", colors);

        if (Array.isArray(colors)) {
            colors.forEach(color => {
                const option = document.createElement("option");
                option.value = color.colorName; 
                option.textContent = color.colorName;
                colorFilter.appendChild(option);
            });
        } else {
            console.error("Expected an array of colors:", colors);
        }

        colorFilter.addEventListener('change', async function(event) {
            const selectedColor = event.target.value; 
            console.log("Selected Color:", selectedColor); 

           // هون انا بقدر اجيب المنتجات التابعة للون معين 
            try {
         
                const productsResponse = await fetch(`https://localhost:44332/api/Products/FilterByColorNew?color=${encodeURIComponent(selectedColor)}&mainCategoryId=${categoryId}`);        
                        if (!productsResponse.ok) {
                    throw new Error(`HTTP error! status: ${productsResponse.status}`);
                }

                const products = await productsResponse.json();
                console.log("Filtered Products:", products);

                const productArray = products.$values || [];
                if (!Array.isArray(productArray)) {
                    console.error("Expected an array of products:", productArray);
                    return;
                }

                productsContainer.innerHTML = '';
                productArray.forEach(element => {
                    const productCard = `
                       <div class="col-lg-3 col-md-4 col-sm-6 col-12">
    <article class="single_product" style="margin: 20px 0;">
        <figure>
            <div class="product_thumb">
                <div class="label_product">
                    ${element.PriceWithDiscount !== null && element.PriceWithDiscount < element.Price ? `<span class="label_sale">${((element.Price - element.PriceWithDiscount) / element.Price * 100).toFixed(0)}%</span>` : ''}
                    <span class="label_new">جديد</span>
                </div>
                <a class="primary_img" href="product-details.html" onclick="storeProductId(${element.ProductId})">
                    <img src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${element.Image}" alt="${element.Name}">
                </a>
            </div>
            <div class="product_content grid_content">
                <h4 class="product_name"><a href="product-details.html" onclick="storeProductId(${element.ProductId})">${element.Name}</a></h4>
                <div class="price_box">
                    <span class="current_price">${element.PriceWithDiscount !== null && element.PriceWithDiscount > 0 ? element.PriceWithDiscount + ' JD' : element.Price + ' JD'}</span>
                    ${element.PriceWithDiscount !== null && element.PriceWithDiscount < element.Price ? `<span class="old_price">${element.Price} JD</span>` : ''}
                </div>
                <div class="add_to_cart">
                    <a href="cart.html" style="margin-bottom: 5px;" onclick="addToCart(${element.ProductId}, '${element.Name}', ${element.Price}, '${element.Image}')">+ أضف إلى السلة</a>
                    <a href="#" class="btn btn-quick-view" onClick="storeProductId(${element.ProductId})">عرض سريع</a>
                </div>
            </div>
        </figure>
    </article>
</div>
                    `;
                    productsContainer.innerHTML += productCard;
                });

                if (productArray.length === 0) {
                    productsContainer.innerHTML = "<p>No products found for the selected color.</p>";
                }

            } catch (error) {
                console.error('Error fetching products:', error);
            }
        });

    } catch (error) {
        console.error('Error fetching colors:', error);
    }
});

// دالة مساعدة لتوليد النجوم بناءً على تقييم المنتج
function renderStars(rating) {
    let stars = '';
    for (let i = 0; i < 5; i++) {
        if (i < rating) {
            stars += '★'; // نجمة مملوءة
        } else {
            stars += '☆'; // نجمة فارغة
        }
    }
    return stars;
}

/////////////////////////////////////////
const slider = document.getElementById('slider-range');
const applyFilterButton = document.getElementById('applyFilter'); // الحصول على الزر

// تحقق من القيم الأولية عند تحميل الصفحة
console.log("Initial range on page load:", slider.noUiSlider ? slider.noUiSlider.get() : "No Slider");

noUiSlider.create(slider, {
    start: [0, 200], // القيم الابتدائية
    connect: true,
    range: {
        'min': 0,
        'max': 200
    }
});

// تحقق من القيم بعد تهيئة السلايدر
console.log("Slider range after initialization:", slider.noUiSlider.get());

// تحديث حقل الإدخال عند تغيير شريط التمرير
slider.noUiSlider.on('update', function(values) {
    console.log("Updated values on slider change:", values);
    document.getElementById('amount').value = `${values[0]} - ${values[1]}`;
});

// عند النقر على الزر، يتم تطبيق الفلتر
applyFilterButton.addEventListener('click', function() {
    filterByPrice(); // استدعاء دالة الفلترة هنا
});

async function filterByPrice() {
    let productContainer = document.getElementById("products-container");
    productContainer.innerHTML = ""; // تفريغ المحتوى الحالي
    const categoryId = localStorage.getItem("CategoryId");
    const minPrice = parseFloat(slider.noUiSlider.get()[0]);
    const maxPrice = parseFloat(slider.noUiSlider.get()[1]);

    console.log(`Min Price: ${minPrice}, Max Price: ${maxPrice}, Category ID: ${categoryId}`);

    try {
        let response = await fetch(`https://localhost:44332/api/Products/FilterByPriceNew?minPrice=${minPrice}&maxPrice=${maxPrice}&mainCategoryId=${categoryId}`);

        if (!response.ok) {
            console.error("HTTP error!", response.status);
            return;
        }

        let data = await response.json();
        console.log("Filtered Products:", data); // تحقق من البيانات المستلمة

        const products = data.$values; // هنا نصل إلى المصفوفة

        if (!Array.isArray(products)) {
            console.error("Expected data.$values to be an array, but got:", products);
            return;
        }

        // عرض المنتجات باستخدام products.forEach
        products.forEach((element) => {
            productContainer.innerHTML += `
            <div class="col-lg-3 col-md-4 col-sm-6 col-12">
                <article class="single_product" style="margin: 20px 0;">
                    <figure>
                        <div class="product_thumb">
                            <div class="label_product">
                                <span class="label_new">جديد</span>
                                ${typeof element.PriceWithDiscount === 'number' && element.PriceWithDiscount > 0 ? `
                                    <span class="label_sale">${element.PriceWithDiscount}%</span>
                                ` : ''}
                            </div>
                            <a class="primary_img" href="product-details.html" onclick="storeProductId(${element.ProductId})">
                                <img src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${element.Image}" alt="${element.Name}">
                            </a>
                            <a class="secondary_img" href="product-details.html" onclick="storeProductId(${element.ProductId})">
                                <img src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${element.Image}" alt="${element.Name}">
                            </a>
                        </div>

                        <div class="product_content grid_content">
                            <h4 class="product_name"><a href="product-details.html">${element.Name}</a></h4>

                            <div class="price_box">
                                <span class="current_price">
                                    ${element.PriceWithDiscount && element.PriceWithDiscount > 0 ? 
                                    (element.Price - (element.Price * (element.PriceWithDiscount / 100))).toFixed(2) + ' JD' 
                                    : element.Price.toFixed(2) + ' JD'}
                                </span>
                                ${element.PriceWithDiscount && element.PriceWithDiscount > 0 ? `
                                    <span class="old_price" style="text-decoration: line-through;">${element.Price.toFixed(2)} JD</span>
                                ` : ''}
                            </div>

                            <div class="add_to_cart">
                                <a href="cart.html" style="margin-bottom:5px" onclick="addToCart(${element.ProductId}, '${element.Name}', ${element.PriceWithDiscount && element.PriceWithDiscount > 0 ? (element.Price - (element.Price * (element.PriceWithDiscount / 100))).toFixed(2) : element.Price.toFixed(2)} '${element.Image}')">+ أضف إلى السلة</a>
                                <a href="#" class="btn btn-quick-view" onClick="storeProductId(${element.ProductId})">عرض سريع</a>
                            </div>
                        </div>
                    </figure>
                </article>
            </div>
            `;
        });

        if (products.length === 0) {
            productContainer.innerHTML = "<p>No products found within the selected price range.</p>";
        }
    } catch (error) {
        console.error("Error:", error);
    }
}

function addToCart(productId, productName, productPrice, productImage) {
    console.log(`Adding to cart: ${productName} (${productId}) - $${productPrice}`);
}

function storeProductId(productId) {
    console.log(`Stored product ID: ${productId}`);
}

////////////////////////////////////////////////////////////////
document.addEventListener("DOMContentLoaded", async function() {
    const brandFilter = document.getElementById("brandFilter");
    const productsContainer = document.getElementById("products-container");
    const categoryId = localStorage.getItem('CategoryId');

    // استدعاء API لجلب العلامات التجارية
    try {
        const brandsResponse = await fetch('https://localhost:44332/api/Products/GetUniqueBrands');
        const brands = await brandsResponse.json();

        if (Array.isArray(brands) && brands.length > 0) {
            brands.forEach(brand => {
                const listItem = document.createElement("a"); // استخدم "a" بدلاً من "li"
                listItem.innerHTML = brand; // نص البراند فقط
                listItem.setAttribute("data-brand", brand); // إضافة البيانات
                brandFilter.appendChild(listItem); // أضف العنصر إلى dropdown-content
            });
        } else {
            brandFilter.innerHTML = '<p>لا توجد علامات تجارية.</p>';
        }

        // إضافة حدث للنقر على العلامات التجارية
        brandFilter.addEventListener('click', async function(event) {
            if (event.target.tagName === 'A') {
                event.preventDefault();
                const selectedBrand = event.target.getAttribute('data-brand');

                // جلب المنتجات بناءً على البراند المختار
                try {
                    const productsResponse = await fetch(`https://localhost:44332/api/Products/FilterByBrandNew?brand=${selectedBrand}&mainCategoryId=${categoryId}`);
                    const products = await productsResponse.json();
                    const productList = products.$values; // الوصول إلى المصفوفة

                    productsContainer.innerHTML = ''; // تفريغ المحتوى الحالي

                    if (!Array.isArray(productList) || productList.length === 0) {
                        productsContainer.innerHTML = '<p>لا توجد منتجات بهذا البراند.</p>';
                        return;
                    }

                    // عرض المنتجات
                    productList.forEach(element => {
                        const productCard = `
                         <div class="col-lg-3 col-md-4 col-sm-6 col-12">
    <article class="single_product" style="margin: 20px 0;">
        <figure>
            <div class="product_thumb">
            <div class="label_product">
    <span class="label_new">جديد</span>
    <!-- عرض الليبل الأحمر لنسبة الخصم -->
    ${typeof element.PriceWithDiscount === 'number' && element.PriceWithDiscount > 0 ? `
        <span class="label_sale">${element.PriceWithDiscount}%</span>
    ` : ''}
</div>

                
                <a class="primary_img" href="product-details.html" onclick="storeProductId(${element.ProductId})">
                    <img src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${element.Image}" alt="${element.Name}">
                </a>
                
                <a class="secondary_img" href="product-details.html" onclick="storeProductId(${element.ProductId})">
                    <img src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${element.Image}" alt="${element.Name}">
                </a>
            </div>

            <div class="product_content grid_content">
                <h4 class="product_name"><a href="product-details.html">${element.Name}</a></h4>

                <div class="price_box">
                    <!-- حساب السعر بعد الخصم -->
                    <span class="current_price">
                        ${element.PriceWithDiscount && element.PriceWithDiscount > 0 ? 
                        (element.Price - (element.Price * (element.PriceWithDiscount / 100))).toFixed(2) + ' JD' 
                        : element.Price.toFixed(2) + ' JD'}
                    </span>

                    <!-- عرض السعر الأصلي مع خط في حالة وجود خصم -->
                    ${element.PriceWithDiscount && element.PriceWithDiscount > 0 ? `
                        <span class="old_price" style="text-decoration: line-through;">${element.Price.toFixed(2)} JD</span>
                    ` : ''}
                </div>

                <div class="add_to_cart">
                    <a href="cart.html" style="margin-bottom:5px" onclick="addToCart(${element.ProductId}, '${element.Name}',${element.priceWithDiscount && element.priceWithDiscount > 0 ? (element.price - (element.price * (element.priceWithDiscount / 100))).toFixed(2) : element.price.toFixed(2)}, '${element.Image}')">+ أضف إلى السلة</a>
                    <a href="#" class="btn btn-quick-view" onClick="storeProductId(${element.ProductId})">عرض سريع</a>
                </div>
            </div>
        </figure>
    </article>
</div>
                        `;
                        productsContainer.innerHTML += productCard;
                    });

                } catch (error) {
                    console.error('Error fetching products:', error);
                    productsContainer.innerHTML = '<p>لا توجد منتجات بهذا البراند.</p>';
                }
            }
        });

    } catch (error) {
        console.error('Error fetching brands:', error);
        brandFilter.innerHTML = '<p>لا توجد منتجات بهذا البراند.</p>';
    }
});

//////////////////////////////////////
// الدالة لتحميل المنتجات الخاصة بفئة معينة (مثل النساء)
async function loadProductsByCategory() {
    debugger
    const categoryId = localStorage.getItem("CategoryId"); // استرجاع معرف الفئة الرئيسية

    if (categoryId) {
        // جلب المنتجات الخاصة بالفئة الرئيسية
        const productsResponse = await fetch(`https://localhost:44332/api/Products/ByCategory/${categoryId}`);
        const products = await productsResponse.json();
        displayProducts(products); // عرض المنتجات

        // جلب الفئات الفرعية
        await loadSubcategories(categoryId);
    }
}

// دالة لتحميل الفئات الفرعية وعرضها في الشريط الجانبي
async function loadSubcategories(categoryId) {
    try {
        const response = await fetch(`https://localhost:44332/api/SubCategory/GetSUbCategoryBYCtegoryID/${categoryId}`);
        const subcategories = await response.json();

        // إضافة الفئات الفرعية إلى واجهة المستخدم
        const subcategoryFilter = document.getElementById('subcategoryFilter');
        subcategoryFilter.innerHTML = ''; // تفريغ المحتوى السابق

        subcategories.forEach(subcategory => {
            const listItem = document.createElement("li");
            listItem.innerHTML = `<a href="#" data-id="${subcategory.subcategoryId}">${subcategory.subcategoryName}</a>`;
            subcategoryFilter.appendChild(listItem);
        });

        // إضافة حدث للنقر على الفئات الفرعية
        subcategoryFilter.addEventListener('click', async function(event) {
            if (event.target.tagName === 'A') {
                event.preventDefault(); // منع إعادة تحميل الصفحة

                const subcategoryId = event.target.getAttribute('data-id'); // جلب معرف الفئة الفرعية

                // جلب المنتجات بناءً على الفئة الفرعية المختارة
                const productsResponse = await fetch(`https://localhost:44332/api/Products/GetProductBySubcategoryId ${subcategoryId}`);
                if (productsResponse.ok) {
                    const products = await productsResponse.json();
                    displayProducts(products); // عرض المنتجات
                } else {
                    console.error('Error fetching products:', productsResponse.statusText);
                    displayProducts([]); // عرض لا شيء إذا لم يتم العثور على منتجات
                }
            }
        });
    } catch (error) {
        console.error('Error fetching subcategories:', error);
    }
}

// دالة لعرض المنتجات
function displayProducts(products) {
    debugger
    const productsContainer = document.getElementById('products-container');
    productsContainer.innerHTML = ''; // تفريغ المحتوى السابق

    if (products.length === 0) {
        productsContainer.innerHTML = '<p>لا توجد منتجات في هذه الفئة.</p>';
        return;
    }

    products.forEach(element => {
        
    const productCard = `
<div class="col-lg-3 col-md-4 col-sm-6 col-12">
    <article class="single_product" style="margin: 20px 0;">
        <figure>
            <div class="product_thumb">
            <div class="label_product">
    <span class="label_new">جديد</span>
    <!-- عرض الليبل الأحمر لنسبة الخصم -->
    ${typeof element.priceWithDiscount === 'number' && element.priceWithDiscount > 0 ? `
        <span class="label_sale">${element.priceWithDiscount}%</span>
    ` : ''}
</div>

                
                <a class="primary_img" href="product-details.html" onclick="storeProductId(${element.productId})">
                    <img src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${element.image}" alt="${element.name}">
                </a>
                
                <a class="secondary_img" href="product-details.html" onclick="storeProductId(${element.productId})">
                    <img src="../../../../Backend/Masterpiece/Masterpiece/Uploads/${element.image}" alt="${element.name}">
                </a>
            </div>

            <div class="product_content grid_content">
                <h4 class="product_name"><a href="product-details.html">${element.name}</a></h4>

                <div class="price_box">
                    <!-- حساب السعر بعد الخصم -->
                    <span class="current_price">
                        ${element.priceWithDiscount && element.priceWithDiscount > 0 ? 
                        (element.price - (element.price * (element.priceWithDiscount / 100))).toFixed(2) + ' JD' 
                        : element.price.toFixed(2) + ' JD'}
                    </span>

                    <!-- عرض السعر الأصلي مع خط في حالة وجود خصم -->
                    ${element.priceWithDiscount && element.priceWithDiscount > 0 ? `
                        <span class="old_price" style="text-decoration: line-through;">${element.price.toFixed(2)} JD</span>
                    ` : ''}
                </div>

                <div class="add_to_cart">
                    <a href="cart.html" style="margin-bottom:5px" onclick="addToCart(${element.productId}, '${element.name}', ${element.priceWithDiscount && element.priceWithDiscount > 0 ? (element.price - (element.price * (element.priceWithDiscount / 100))).toFixed(2) : element.price.toFixed(2)}, '${element.image}')">+ أضف إلى السلة</a>
                    <a href="#" class="btn btn-quick-view" onClick="storeProductId(${element.productId})">عرض سريع</a>
                </div>
            </div>
        </figure>
    </article>
</div>

    `;
    productsContainer.innerHTML += productCard;
});

}

// حدث عند تحميل الصفحة
document.addEventListener("DOMContentLoaded", loadProductsByCategory);


/////////////////////////

var UserId = localStorage.getItem("UserId");
debugger
async function addToCart(productId, name, price, image) {
debugger
    if (UserId != null) {
        debugger
        event.preventDefault();

        var url = `https://localhost:44332/api/Cart/AddCartItem/${UserId}`;
    
        var data = {
            ProductId: productId,
            Quantity: 1,
           
        };
        let response = await fetch(url, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
        });

        if (response.ok) {
            alert("Product added successfully to the cart!");

debugger
            let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

            // Check if the product is already in the cart
            let existingItem = cartItems.find((item) => item.product_id === productId);
    
            if (existingItem) {
                // If the product is already in the cart, update the quantity
                existingItem.quantity = parseInt(existingItem.quantity) + 1; // Increment quantity by 1
            } else {
                // If it's a new product, add it to the cart array
                cartItems.push(cartItem);
            }
    
            // Save the updated cart back to localStorage
            localStorage.setItem("cartItems", JSON.stringify(cartItems));

            // Redirect to the cart page
            window.location.href = "cart.html"; // استبدل هذا بالرابط الصحيح
        } else {
            let error = await response.text();
            console.error("Error:", error);
        }
    } else {
        debugger
        const cartItem = {
            product_id: productId,
            quantity: 1,
            name: name,
            price: price,
            image: image,
        };
debugger
        // Check if there is already a cart in localStorage
        let cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];

        // Check if the product is already in the cart
        let existingItem = cartItems.find((item) => item.product_id === productId);

        if (existingItem) {
            // If the product is already in the cart, update the quantity
            existingItem.quantity = parseInt(existingItem.quantity) + 1; // Increment quantity by 1
        } else {
            // If it's a new product, add it to the cart array
            cartItems.push(cartItem);
        }

        // Save the updated cart back to localStorage
        localStorage.setItem("cartItems", JSON.stringify(cartItems));

        // تأكد من عرض تفاصيل المنتج
       alert(`Product added successfully to the cart!\nName: ${name}\nPrice: $${price}\nQuantity: ${cartItem.quantity}`);
        
        // Redirect to the cart page
        window.location.href = "cart.html"; // استبدل هذا بالرابط الصحيح
    }
}

///////////////////////////////
// بحط كود الخاص بالبرودكت ديتيلززز ان شاء الله يزبط 
function storeProductId(productId) {
    localStorage.setItem('productId', productId); // تخزين productId في localStorage
    window.location.href = 'productdetalis1.html'; // إعادة التوجيه إلى صفحة التفاصيل
}
   /////////////////////////
   
   
   
   
   </script> 
    
<!-- JS
============================================ -->

<!--popper min js-->
<script src="DornoStyle/assets/js/popper.js"></script>
<!--bootstrap min js-->
<script src="DornoStyle/assets/js/bootstrap.min.js"></script>
<!--owl carousel min js-->
<script src="DornoStyle/assets/js/owl.carousel.min.js"></script>
<!--slick min js-->
<script src="DornoStyle/assets/js/slick.min.js"></script>
<!--magnific popup min js-->
<script src="DornoStyle/assets/js/jquery.magnific-popup.min.js"></script>
<!--counterup min js-->
<script src="DornoStyle/assets/js/jquery.counterup.min.js"></script>
<!--jquery countdown min js-->
<script src="DornoStyle/assets/js/jquery.countdown.js"></script>
<!--jquery ui min js-->
<script src="DornoStyle/assets/js/jquery.ui.js"></script>
<!--jquery elevatezoom min js-->
<script src="DornoStyle/assets/js/jquery.elevatezoom.js"></script>
<!--isotope packaged min js-->
<script src="DornoStyle/assets/js/isotope.pkgd.min.js"></script>
<!--slinky menu js-->
<script src="DornoStyle/assets/js/slinky.menu.js"></script>
<!-- Plugins JS -->
<script src="DornoStyle/assets/js/plugins.js"></script>

<!-- Main JS -->
<script src="DornoStyle/assets/js/main.js"></script>


<script src="miniCart.js"></script> 

</body>


<!-- Mirrored from htmldemo.net/dorno/dorno/shop-right-sidebar.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Sep 2024 19:54:28 GMT -->
</html>